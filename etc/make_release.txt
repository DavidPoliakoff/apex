#!/bin/bash -e
# Update from origin
git fetch origin

# Get the latest develop and merge into master
git checkout develop
git pull
git checkout master
git pull
git merge develop

# Change this to the old and new tags
oldtag=v2.1.6
tagname=v2.1.7

# Get the changes since last tag
# git log $(git describe --tags --abbrev=0)..HEAD --oneline >& v2.1.0.txt
./etc/maketag.sh

# Edit the log to add a release description
vi v${tagname}.txt

# make a tag
git tag -F v${tagname}.txt v${tagname}

# push to origin!

# push all changes
git push --all -u origin master
# push all tags
git push --tags -f origin
# prune deleted branches
git remote prune github
